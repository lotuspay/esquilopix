import{r as c,c as u,j as s}from"./app-ISxEiS1S.js";function z({isOpen:r,onClose:d,user:n,onUserUpdate:h}){const[l,g]=c.useState(null),[N,m]=c.useState(!1),[o,x]=c.useState(!1),[f,t]=c.useState(!1);c.useEffect(()=>{r&&v()},[r]);const v=async()=>{m(!0);try{const e=await u.get("/agent-panel-data");g(e.data)}catch(e){console.error("Error fetching agent data:",e)}finally{m(!1)}},C=async()=>{const e=`${window.location.origin}/?ref=${n.id}`;try{if(navigator.clipboard&&window.isSecureContext){await navigator.clipboard.writeText(e),t(!0),setTimeout(()=>t(!1),2e3);return}const a=document.createElement("textarea");if(a.value=e,a.style.position="fixed",a.style.left="-999999px",a.style.top="-999999px",document.body.appendChild(a),a.focus(),a.select(),navigator.userAgent.match(/ipad|iphone/i)){const p=document.createRange();p.selectNodeContents(a);const j=window.getSelection();j.removeAllRanges(),j.addRange(p),a.setSelectionRange(0,999999)}const L=document.execCommand("copy");if(document.body.removeChild(a),L)t(!0),setTimeout(()=>t(!1),2e3);else throw new Error("Copy command failed")}catch(a){console.error("Failed to copy: ",a),prompt("Copie o link abaixo:",e)}},w=async()=>{if(!(!l?.pendent_comission||parseFloat(l.pendent_comission)<=0||o)){x(!0);try{if((await u.post("/agent-collect-commission")).data.success){const a={...n,balance:parseFloat(n.balance)+parseFloat(l.pendent_comission)};h&&h(a),await v()}}catch(e){console.error("Error collecting commission:",e),e.response?.data?.message}finally{x(!1)}}};if(!r)return null;const i=e=>{const a=parseFloat(e||0);return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)},y=e=>{const a={1:s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),2:s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2zm0 0l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),3:s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2zm5.5 6l1.5-3 1.5 3 3 .44-2.18 2.13.51 3-2.68-1.41L15.5 8zm-11 0L5 5l1.5 3 3 .44-2.18 2.13.51 3L5.15 12.16 2.5 13.57l.51-3L.83 8.44 3.5 8z"})})};return a[e]||a[1]};return s.jsx("div",{className:"profile-modal-overlay",onClick:d,children:s.jsxs("div",{className:"agent-panel-modal",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"agent-panel-header",children:[s.jsxs("div",{className:"agent-panel-title",children:[s.jsx("div",{className:"title-icon",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zM4 18v-6c0-1.1.9-2 2-2h3l2-3h2l2 3h3c1.1 0 2 .9 2 2v6H4zm9-5.5L9 9H7v8h2v-3.5l3 1.5 3-1.5V17h2V9h-2l-4 3.5z"})})}),s.jsx("h2",{children:"Painel de Agente"})]}),s.jsx("button",{className:"agent-panel-close",onClick:d,children:"âœ•"})]}),s.jsx("div",{className:"agent-panel-content",children:N?s.jsxs("div",{className:"agent-loading",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("span",{children:"Carregando dados do agente..."})]}):l?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"agent-summary",children:[s.jsxs("div",{className:"summary-card cpa-card",children:[s.jsx("div",{className:"card-icon",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"})})}),s.jsxs("div",{className:"card-content",children:[s.jsx("span",{className:"card-label",children:"Total comissÃ£o recebida"}),s.jsx("span",{className:"card-value",children:i(l.total_cpa_received+l.total_revshare_received)})]})]}),s.jsxs("div",{className:"summary-card revshare-card",children:[s.jsx("div",{className:"card-icon",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V16h-2.67v2.09c-2.84-.48-5.09-2.8-5.48-5.66h2.9v-2h-2.9c.39-2.86 2.64-5.18 5.48-5.66V7h2.67v-2.09c2.84.48 5.09 2.8 5.48 5.66h-2.9v2h2.9c-.39 2.86-2.64 5.18-5.48 5.66z"})})}),s.jsxs("div",{className:"card-content",children:[s.jsx("span",{className:"card-label",children:"Total Apostas VÃ¡lidas"}),s.jsx("span",{className:"card-value",children:i(l.total_revshare_received)})]})]}),s.jsxs("div",{className:"summary-card pending-card",children:[s.jsx("div",{className:"card-icon",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),s.jsxs("div",{className:"card-content",children:[s.jsx("span",{className:"card-label",children:"ComissÃ£o Pendente"}),s.jsx("span",{className:"card-value pending",children:i(l.pendent_comission)})]})]})]}),l.pendent_comission&&parseFloat(l.pendent_comission)>0&&s.jsxs("div",{className:"collect-commission-section",children:[s.jsx("div",{className:"collect-commission-info",children:s.jsxs("p",{children:["VocÃª tem ",s.jsx("strong",{children:i(l.pendent_comission)})," em comissÃµes pendentes disponÃ­veis para saque."]})}),s.jsxs("button",{className:"collect-commission-btn",onClick:w,disabled:o,children:[s.jsx("div",{className:"btn-icon",children:o?s.jsx("div",{className:"loading-spinner small"}):s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"})})}),o?"Coletando...":"Coletar ComissÃµes"]})]}),s.jsxs("div",{className:"share-referral-section",style:{border:0,padding:0},children:[s.jsx("h3",{children:"Seu Link de Convite"}),s.jsxs("div",{className:"referral-link-container",style:{marginTop:-10},children:[s.jsxs("div",{className:"referral-link",children:[window.location.origin,"/?ref=",n.id]}),s.jsxs("button",{className:"copy-link-btn",onClick:C,children:[s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})}),f?"Copiado!":"Copiar"]})]})]}),s.jsx("div",{className:"referral-levels",children:[1,2,3].map(e=>s.jsxs("div",{className:`referral-level level-${e}`,children:[s.jsxs("div",{className:"level-header",children:[s.jsxs("div",{className:"level-title",children:[s.jsx("div",{className:"level-icon",children:y(e)}),s.jsxs("h3",{children:["NÃ­vel ",e]})]}),s.jsxs("div",{className:"level-badge",children:[l.levels[e]?.count||0," indicados"]})]}),s.jsxs("div",{className:"level-stats",children:[s.jsxs("div",{className:"stat-row",children:[s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"ðŸ’°"}),s.jsxs("div",{className:"stat-info",children:[s.jsx("span",{className:"stat-label",children:"Indicados depositantes"}),s.jsx("span",{className:"stat-value",children:l.levels[e]?.depositors_count||0})]})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("span",{className:"stat-icon",children:"ðŸ‘¥"}),s.jsxs("div",{className:"stat-info",children:[s.jsx("span",{className:"stat-label",children:"Total de indicados"}),s.jsx("span",{className:"stat-value",children:l.levels[e]?.count||0})]})]})]}),s.jsxs("div",{className:"total-cpa",children:[s.jsxs("span",{className:"total-label",children:["Total DepÃ³sitos NÃ­vel ",e,":"]}),s.jsx("span",{className:"total-value",children:i(l.levels[e]?.total_deposits||0)})]})]})]},e))}),s.jsxs("div",{className:"agent-instructions",style:{display:"none"},children:[s.jsxs("h4",{children:[s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"})}),"Como Funciona o Sistema de Agente"]}),s.jsxs("ul",{children:[s.jsxs("li",{children:["ðŸ“‹ ",s.jsx("strong",{children:"NÃ­vel 1:"})," UsuÃ¡rios que vocÃª indicou diretamente"]}),s.jsxs("li",{children:["ðŸ“‹ ",s.jsx("strong",{children:"NÃ­vel 2:"})," UsuÃ¡rios indicados pelos seus indicados do NÃ­vel 1"]}),s.jsxs("li",{children:["ðŸ“‹ ",s.jsx("strong",{children:"NÃ­vel 3:"})," UsuÃ¡rios indicados pelos seus indicados do NÃ­vel 2"]}),s.jsxs("li",{children:["ðŸ’° ",s.jsx("strong",{children:"CPA:"})," ",l.cpa_mode==="fix"?"VocÃª recebe uma comissÃ£o fixa pelo primeiro depÃ³sito de cada indicado":"VocÃª recebe uma % de comissÃ£o sobre todos os depÃ³sitos dos indicados"]}),s.jsxs("li",{children:["ðŸ“ˆ ",s.jsx("strong",{children:"Aposta vÃ¡lida:"})," VocÃª recebe uma pelas apostas vÃ¡lidas dos seus indicados"]})]})]})]}):s.jsxs("div",{className:"no-data",children:[s.jsx("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"currentColor",opacity:"0.3",children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"})}),s.jsx("span",{children:"Nenhum dado disponÃ­vel"})]})})]})})}export{z as A};
